- job-template:
    name: "{st-project}_gate"
    project-type: pipeline
    concurrent: true
    quiet-period: 0
    properties:
      - build-discarder:
          days-to-keep: 14
          artifact-num-to-keep: 60
      - inject:
          properties-content: |
            DEFAULT_SCM_URL_PREFIX={default-scm-url-prefix}
            STDCI_SCM_URL={stdci-scm-url}
            STDCI_SCM_URL_ALIASES={stdci-scm-url-aliases}
            STDCI_SCM_REFSPEC={stdci-scm-refspec}
            GIT_AUTHOR_NAME={git-config-name}
            GIT_AUTHOR_EMAIL={git-config-email}
            GIT_COMMITTER_NAME={git-config-name}
            GIT_COMMITTER_EMAIL={git-config-email}
            LOADER_NODE_LABEL={loader-node-label}
            SYSTEM_QUEUE_PREFIX={st-queue-prefix}
            SYSTEM_TESTS_PROJECT={st-project}
            SYSTEM_TEST_SUIT_TYPES={st-suit-types}
            OPENSHIFT_PROJECT={openshift-project}
    parameters:
      - text:
          name: CHECKED_COMMITS
          description: |
            A table of commits to check represented as a set of lines where each
            line contains 3 colon-separated values:

              repo_url:branch:refspec

      - string:
          name: STD_CI_CLONE_URL
          description: A Git repo URL of the project that is being tested
      - string:
          name: STD_CI_REFSPEC
          description: Refspec to the Git commit that is mainly being tested
      - string:
          name: STD_CI_CHANGE_URL
          description: |
            URL to UI showing the change being testd, this is mostly for
            display/logging purposes

    dsl: !include-raw-escape: groovy-scripts/pipeline-loader.groovy
