---
sub-stages:
  - default:
      arch:
        - x86_64:
            distro: [el7, fc27, fc28, fc29, fcraw]
        - ppc64le:
            distro: el7
        - s390x:
            distro: [fc27, fc28, fc29]
            script:
              fromfile: automation/check-patch-s390x.sh
            stage: check-patch
      runif:
        file-changed:
          - jobs/confs/shell-scripts/collect_artifacts.sh
          - jobs/confs/yaml/templates/standard-stage.yaml
          - jobs/confs/shell-scripts/cleanup_slave.sh
          - jobs/confs/shell-scripts/global_setup*
          - scripts/docker_cleanup.py
          - date/Dockerfiles/*
          - data/slave-repos/*
          - mock_configs/*
          - scripts/*.py
          - test/*.py
          - date/dummy.spec
          - conftest.py
          - automation/check-patch.sh
          - automation/check-patch.mounts*
          - automation/check-patch.packages*
          - automation/check-patch.repos*
          - automation/check-patch.environment.yaml*
  - jenkins-jobs:
      runif:
        file-changed:
          - jobs/*
          - automation/*.jenkins-jobs.*
  - build-stdci-container:
      runif:
        file-changed:
          - container/*
          - automation/*.{{ substage }}.*
  - minishift_fixture:
      runif:
        file-changed:
          - scripts/object_utils.py
          - sysscripts/minishift_fixture.py
          - automation/*.{{ substage }}.*
      runtime-requirements:
        host-os: same
  - playbooks:
      runif:
        file-changed:
          - playbooks/*
          - automation/*.{{ substage }}.*
  - el7-loader-node:
      runif:
        file-changed:
          - container/el7-loader-node/*
          - automation/verify-build-containers.*
  - el7-runner-node:
      runif:
        file-changed:
          - container/el7-runner-node/*
          - automation/verify-build-containers.*
